<?php/** * YZOI Online Judge System * * @copyright   Copyright (c) 2010 YZOI * @author      xaero <xaero@msn.cn> * @version     $Id: ControllerBase.php 2015-10-22 18:24 $ */namespace YZOI\Controllers\Admin;use YZOI\Controllers\Base;class ControllerBase extends Base{    public function initialize()    {        // 验证登录        $current_user = $this->auth->getIdentity();        if (!$current_user || ! is_object($current_user))        {            $this->flashSession->error("请先登录");            return $this->response->redirect("users/login");        }        // 验证是否是管理员        if (! $current_user->is_ultraman())        {            $this->flashSession->error("Access Deny!");            return $this->response->redirect("users");            //throw new Exception("Access Deny!");        }        $this->view->setVar('logged_in', $current_user);        $this->view->admin_uri = $this->config->onlinejudge->admin_uri;    }    public function afterExecuteRoute()    {        $this->view->setViewsDir($this->view->getViewsDir() . 'admin/');    }}